{"remainingRequest":"/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/babel-loader/lib/index.js!/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/feathers-vuex/dist/make-get-mixin.js","dependencies":[{"path":"/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/feathers-vuex/dist/make-get-mixin.js","mtime":1576553531990},{"path":"/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/cache-loader/dist/cjs.js","mtime":1576617922850},{"path":"/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/babel-loader/lib/index.js","mtime":1572970632149}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _defineProperty from \"/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\n\n/*\neslint\nno-console: 0,\n@typescript-eslint/explicit-function-return-type: 0,\n@typescript-eslint/no-explicit-any: 0\n*/\nimport inflection from 'inflection';\nexport default function makeFindMixin(options) {\n  var _data, _computed;\n\n  var service = options.service,\n      params = options.params,\n      fetchParams = options.fetchParams,\n      queryWhen = options.queryWhen,\n      id = options.id,\n      _options$local = options.local,\n      local = _options$local === void 0 ? false : _options$local,\n      _options$qid = options.qid,\n      qid = _options$qid === void 0 ? 'default' : _options$qid,\n      item = options.item,\n      debug = options.debug;\n  var name = options.name,\n      _options$watch = options.watch,\n      watch = _options$watch === void 0 ? [] : _options$watch;\n\n  if (typeof watch === 'string') {\n    watch = [watch];\n  } else if (typeof watch === 'boolean' && watch) {\n    watch = ['query'];\n  }\n\n  if (!service || typeof service !== 'string' && typeof service !== 'function') {\n    throw new Error(\"The 'service' option is required in the FeathersVuex make-find-mixin and must be a string.\");\n  }\n\n  if (typeof service === 'function' && !name) {\n    name = 'service';\n  }\n\n  var nameToUse = (name || service).replace('-', '_');\n  var singularized = inflection.singularize(nameToUse);\n  var prefix = inflection.camelize(singularized, true);\n  var capitalized = prefix.charAt(0).toUpperCase() + prefix.slice(1);\n  var SERVICE_NAME = \"\".concat(prefix, \"ServiceName\");\n  var ITEM = item || prefix;\n\n  if (typeof service === 'function' && name === 'service' && !item) {\n    ITEM = 'item';\n  }\n\n  var IS_GET_PENDING = \"isGet\".concat(capitalized, \"Pending\");\n  var PARAMS = \"\".concat(prefix, \"Params\");\n  var FETCH_PARAMS = \"\".concat(prefix, \"FetchParams\");\n  var WATCH = \"\".concat(prefix, \"Watch\");\n  var QUERY_WHEN = \"\".concat(prefix, \"QueryWhen\");\n  var ERROR = \"\".concat(prefix, \"Error\");\n  var GET_ACTION = \"get\".concat(capitalized);\n  var GET_GETTER = \"get\".concat(capitalized, \"FromStore\");\n  var HAS_ITEM_BEEN_REQUESTED_ONCE = \"has\".concat(capitalized, \"BeenRequestedOnce\");\n  var HAS_ITEM_LOADED_ONCE = \"has\".concat(capitalized, \"LoadedOnce\");\n  var LOCAL = \"\".concat(prefix, \"Local\");\n  var QID = \"\".concat(prefix, \"Qid\");\n  var ID = \"\".concat(prefix, \"Id\");\n\n  var _data2 = (_data = {}, _defineProperty(_data, IS_GET_PENDING, false), _defineProperty(_data, HAS_ITEM_BEEN_REQUESTED_ONCE, false), _defineProperty(_data, HAS_ITEM_LOADED_ONCE, false), _defineProperty(_data, WATCH, watch), _defineProperty(_data, QID, qid), _defineProperty(_data, ERROR, null), _data);\n\n  var mixin = {\n    data: function data() {\n      return _data2;\n    },\n    computed: (_computed = {}, _defineProperty(_computed, ITEM, function () {\n      return this[ID] ? this.$store.getters[\"\".concat(this[SERVICE_NAME], \"/get\")](this[ID]) : null;\n    }), _defineProperty(_computed, QUERY_WHEN, function () {\n      return true;\n    }), _defineProperty(_computed, GET_GETTER, function () {\n      var _this = this;\n\n      return function (id) {\n        var serviceName = _this[SERVICE_NAME];\n        return _this.$store.getters[\"\".concat(serviceName, \"/get\")](id);\n      };\n    }), _computed),\n    methods: _defineProperty({}, GET_ACTION, function (id, params) {\n      var _this2 = this;\n\n      var paramsToUse = params || this[FETCH_PARAMS] || this[PARAMS];\n      var idToUse = id || this[ID];\n\n      if (!this[LOCAL]) {\n        if (this[QUERY_WHEN]) {\n          this[IS_GET_PENDING] = true;\n          this[HAS_ITEM_BEEN_REQUESTED_ONCE] = true;\n\n          if (idToUse != null) {\n            return this.$store.dispatch(\"\".concat(this[SERVICE_NAME], \"/get\"), [idToUse, paramsToUse]).then(function (response) {\n              // To prevent thrashing, only clear ERROR on response, not on initial request.\n              _this2[ERROR] = null;\n              _this2[HAS_ITEM_LOADED_ONCE] = true;\n              _this2[IS_GET_PENDING] = false;\n              return response;\n            }).catch(function (error) {\n              _this2[ERROR] = error;\n              return error;\n            });\n          }\n        }\n      }\n    }),\n    created: function created() {\n      var _this3 = this;\n\n      debug && console.log(\"running 'created' hook in makeGetMixin for service \\\"\".concat(service, \"\\\" (using name \").concat(nameToUse, \"\\\")\"));\n      debug && console.log(ID, this[ID]);\n      debug && console.log(PARAMS, this[PARAMS]);\n      debug && console.log(FETCH_PARAMS, this[FETCH_PARAMS]);\n      var pType = Object.getPrototypeOf(this);\n\n      if (this.hasOwnProperty(ID) || pType.hasOwnProperty(ID) || pType.hasOwnProperty(PARAMS) || pType.hasOwnProperty(FETCH_PARAMS)) {\n        if (!watch.includes(ID)) {\n          watch.push(ID);\n        }\n\n        watch.forEach(function (prop) {\n          if (typeof prop !== 'string') {\n            throw new Error(\"Values in the 'watch' array must be strings.\");\n          }\n\n          prop = prop.replace('query', PARAMS);\n\n          if (pType.hasOwnProperty(FETCH_PARAMS)) {\n            if (prop.startsWith(PARAMS)) {\n              prop.replace(PARAMS, FETCH_PARAMS);\n            }\n          }\n\n          _this3.$watch(prop, function () {\n            return this[GET_ACTION]();\n          });\n        });\n        return this[GET_ACTION]();\n      } else {\n        console.log(\"No \\\"\".concat(ID, \"\\\", \\\"\").concat(PARAMS, \"\\\" or \\\"\").concat(FETCH_PARAMS, \"\\\" attribute was found in the makeGetMixin for the \\\"\").concat(service, \"\\\" service (using name \\\"\").concat(nameToUse, \"\\\").  No queries will be made.\"));\n      }\n    }\n  };\n\n  function hasSomeAttribute(vm) {\n    for (var _len = arguments.length, attributes = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      attributes[_key - 1] = arguments[_key];\n    }\n\n    return attributes.some(function (a) {\n      return vm.hasOwnProperty(a) || Object.getPrototypeOf(vm).hasOwnProperty(a);\n    });\n  }\n\n  function setupAttribute(NAME, value) {\n    var computedOrMethods = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'computed';\n    var returnTheValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    if (typeof value === 'boolean') {\n      _data2[NAME] = !!value;\n    } else if (typeof value === 'string') {\n      mixin.computed[NAME] = function () {\n        // If the specified computed prop wasn't found, display an error.\n        if (!returnTheValue) {\n          if (!hasSomeAttribute(this, value, NAME)) {\n            throw new Error(\"Value for \".concat(NAME, \" was not found on the component at '\").concat(value, \"'.\"));\n          }\n        }\n\n        return returnTheValue ? value : this[value];\n      };\n    } else if (typeof value === 'function') {\n      mixin[computedOrMethods][NAME] = value;\n    }\n  }\n\n  setupAttribute(SERVICE_NAME, service, 'computed', true);\n  setupAttribute(ID, id);\n  setupAttribute(PARAMS, params);\n  setupAttribute(FETCH_PARAMS, fetchParams);\n  setupAttribute(QUERY_WHEN, queryWhen, 'computed');\n  setupAttribute(LOCAL, local);\n  return mixin;\n}",{"version":3,"sources":["/Users/janzheng/Desktop/projects/_lessons/feathersjs/feathers-chat-vuex/node_modules/feathers-vuex/dist/make-get-mixin.js"],"names":["inflection","makeFindMixin","options","service","params","fetchParams","queryWhen","id","local","qid","item","debug","name","watch","Error","nameToUse","replace","singularized","singularize","prefix","camelize","capitalized","charAt","toUpperCase","slice","SERVICE_NAME","ITEM","IS_GET_PENDING","PARAMS","FETCH_PARAMS","WATCH","QUERY_WHEN","ERROR","GET_ACTION","GET_GETTER","HAS_ITEM_BEEN_REQUESTED_ONCE","HAS_ITEM_LOADED_ONCE","LOCAL","QID","ID","data","mixin","computed","$store","getters","serviceName","methods","paramsToUse","idToUse","dispatch","then","response","catch","error","created","console","log","pType","Object","getPrototypeOf","hasOwnProperty","includes","push","forEach","prop","startsWith","$watch","hasSomeAttribute","vm","attributes","some","a","setupAttribute","NAME","value","computedOrMethods","returnTheValue"],"mappings":"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","sourcesContent":["/*\neslint\nno-console: 0,\n@typescript-eslint/explicit-function-return-type: 0,\n@typescript-eslint/no-explicit-any: 0\n*/\nimport inflection from 'inflection'\nexport default function makeFindMixin(options) {\n  const {\n    service,\n    params,\n    fetchParams,\n    queryWhen,\n    id,\n    local = false,\n    qid = 'default',\n    item,\n    debug\n  } = options\n  let { name, watch = [] } = options\n  if (typeof watch === 'string') {\n    watch = [watch]\n  } else if (typeof watch === 'boolean' && watch) {\n    watch = ['query']\n  }\n  if (\n    !service ||\n    (typeof service !== 'string' && typeof service !== 'function')\n  ) {\n    throw new Error(\n      `The 'service' option is required in the FeathersVuex make-find-mixin and must be a string.`\n    )\n  }\n  if (typeof service === 'function' && !name) {\n    name = 'service'\n  }\n  const nameToUse = (name || service).replace('-', '_')\n  const singularized = inflection.singularize(nameToUse)\n  const prefix = inflection.camelize(singularized, true)\n  const capitalized = prefix.charAt(0).toUpperCase() + prefix.slice(1)\n  const SERVICE_NAME = `${prefix}ServiceName`\n  let ITEM = item || prefix\n  if (typeof service === 'function' && name === 'service' && !item) {\n    ITEM = 'item'\n  }\n  const IS_GET_PENDING = `isGet${capitalized}Pending`\n  const PARAMS = `${prefix}Params`\n  const FETCH_PARAMS = `${prefix}FetchParams`\n  const WATCH = `${prefix}Watch`\n  const QUERY_WHEN = `${prefix}QueryWhen`\n  const ERROR = `${prefix}Error`\n  const GET_ACTION = `get${capitalized}`\n  const GET_GETTER = `get${capitalized}FromStore`\n  const HAS_ITEM_BEEN_REQUESTED_ONCE = `has${capitalized}BeenRequestedOnce`\n  const HAS_ITEM_LOADED_ONCE = `has${capitalized}LoadedOnce`\n  const LOCAL = `${prefix}Local`\n  const QID = `${prefix}Qid`\n  const ID = `${prefix}Id`\n  const data = {\n    [IS_GET_PENDING]: false,\n    [HAS_ITEM_BEEN_REQUESTED_ONCE]: false,\n    [HAS_ITEM_LOADED_ONCE]: false,\n    [WATCH]: watch,\n    [QID]: qid,\n    [ERROR]: null\n  }\n  const mixin = {\n    data() {\n      return data\n    },\n    computed: {\n      [ITEM]() {\n        return this[ID]\n          ? this.$store.getters[`${this[SERVICE_NAME]}/get`](this[ID])\n          : null\n      },\n      [QUERY_WHEN]() {\n        return true\n      },\n      // Exposes `get<Item>FromStore`\n      [GET_GETTER]() {\n        return id => {\n          const serviceName = this[SERVICE_NAME]\n          return this.$store.getters[`${serviceName}/get`](id)\n        }\n      }\n    },\n    methods: {\n      [GET_ACTION](id, params) {\n        const paramsToUse = params || this[FETCH_PARAMS] || this[PARAMS]\n        const idToUse = id || this[ID]\n        if (!this[LOCAL]) {\n          if (this[QUERY_WHEN]) {\n            this[IS_GET_PENDING] = true\n            this[HAS_ITEM_BEEN_REQUESTED_ONCE] = true\n            if (idToUse != null) {\n              return this.$store\n                .dispatch(`${this[SERVICE_NAME]}/get`, [idToUse, paramsToUse])\n                .then(response => {\n                  // To prevent thrashing, only clear ERROR on response, not on initial request.\n                  this[ERROR] = null\n                  this[HAS_ITEM_LOADED_ONCE] = true\n                  this[IS_GET_PENDING] = false\n                  return response\n                })\n                .catch(error => {\n                  this[ERROR] = error\n                  return error\n                })\n            }\n          }\n        }\n      }\n    },\n    created() {\n      debug &&\n        console.log(\n          `running 'created' hook in makeGetMixin for service \"${service}\" (using name ${nameToUse}\")`\n        )\n      debug && console.log(ID, this[ID])\n      debug && console.log(PARAMS, this[PARAMS])\n      debug && console.log(FETCH_PARAMS, this[FETCH_PARAMS])\n      const pType = Object.getPrototypeOf(this)\n      if (\n        this.hasOwnProperty(ID) ||\n        pType.hasOwnProperty(ID) ||\n        pType.hasOwnProperty(PARAMS) ||\n        pType.hasOwnProperty(FETCH_PARAMS)\n      ) {\n        if (!watch.includes(ID)) {\n          watch.push(ID)\n        }\n        watch.forEach(prop => {\n          if (typeof prop !== 'string') {\n            throw new Error(`Values in the 'watch' array must be strings.`)\n          }\n          prop = prop.replace('query', PARAMS)\n          if (pType.hasOwnProperty(FETCH_PARAMS)) {\n            if (prop.startsWith(PARAMS)) {\n              prop.replace(PARAMS, FETCH_PARAMS)\n            }\n          }\n          this.$watch(prop, function() {\n            return this[GET_ACTION]()\n          })\n        })\n        return this[GET_ACTION]()\n      } else {\n        console.log(\n          `No \"${ID}\", \"${PARAMS}\" or \"${FETCH_PARAMS}\" attribute was found in the makeGetMixin for the \"${service}\" service (using name \"${nameToUse}\").  No queries will be made.`\n        )\n      }\n    }\n  }\n  function hasSomeAttribute(vm, ...attributes) {\n    return attributes.some(a => {\n      return vm.hasOwnProperty(a) || Object.getPrototypeOf(vm).hasOwnProperty(a)\n    })\n  }\n  function setupAttribute(\n    NAME,\n    value,\n    computedOrMethods = 'computed',\n    returnTheValue = false\n  ) {\n    if (typeof value === 'boolean') {\n      data[NAME] = !!value\n    } else if (typeof value === 'string') {\n      mixin.computed[NAME] = function() {\n        // If the specified computed prop wasn't found, display an error.\n        if (!returnTheValue) {\n          if (!hasSomeAttribute(this, value, NAME)) {\n            throw new Error(\n              `Value for ${NAME} was not found on the component at '${value}'.`\n            )\n          }\n        }\n        return returnTheValue ? value : this[value]\n      }\n    } else if (typeof value === 'function') {\n      mixin[computedOrMethods][NAME] = value\n    }\n  }\n  setupAttribute(SERVICE_NAME, service, 'computed', true)\n  setupAttribute(ID, id)\n  setupAttribute(PARAMS, params)\n  setupAttribute(FETCH_PARAMS, fetchParams)\n  setupAttribute(QUERY_WHEN, queryWhen, 'computed')\n  setupAttribute(LOCAL, local)\n  return mixin\n}\n"]}]}